:root {
	--cpu-accent: #117dbb;
	--cpu-accent-medium: #42a9e4;
	--cpu-accent-light: #d9eaf4;
	--cpu-accent-extralight: #f1f6fa;
	
	--window-background: #fff;
	--window-background-secondary: #f0f0f0;
	--window-text: #000;
	--window-text-light: #707070;
	--window-border-inactive: #4b4251;
	--window-border: #5c5a58;
	--window-accent: #4c4a48;
	--window-hover: #5e5c5b;
	--close-hover: #e81123;
	--window-hyperlink: #0066cc;
	--window-hyperlink-hover: #3399ff;
	
	--divider: #d9d9d9;
	--divider-light: #f2f2f2;
	
	--hover: #e5f3ff;
	--hover-border: #cce8ff;
	/*
		These are the exact colors identified by GIMP to
		match those in Windows, but they don't appear
		the same in browser. While less correct, it will
		be much easier to assume all colors are opaque.
	*/
	/* --hover: rgba(0, 191, 255, .217); */
	/* --hover-border: rgba(0, 191, 255, .395); */
	--active: #cce8ff;
	--active-border: #99d1ff;
	--tab-hover: #d8eaf9;
	
	--desktop-scale: 1.15;
	--scale: calc(1 / var(--desktop-scale));
}

body {
	margin: 0;
	background: #412f4d;
	font-family: 'Segoe UI', 'Roboto', sans-serif;
	color: rgb(226, 226, 226);
	font-size: calc(14px * var(--scale));
	display: flex;
	flex-direction: column;
	flex-wrap: wrap;
	align-items: start;
	align-content: start;
	padding: 10px;
	gap: 10px;
	min-height: 100%;
}
* {
	box-sizing: border-box;
}

a {
	color: var(--window-hyperlink);
	text-decoration: none;
}

a:hover {
	color: var(--window-hyperlink-hover);
	text-decoration: underline;
}

a:visited {
	color: var(--window-hyperlink);
}

#options {
	display: flex;
	flex-direction: column;
	flex-wrap: wrap;
	align-items: start;
	gap: 20px;
}

#form {
	display: flex;
	flex-direction: column;
	gap: 5px;
	break-after: always;
}

#intermediate {
	min-width: 80px;
	min-height: 60px;
	image-rendering: -webkit-optimize-contrast;
	image-rendering: crisp-edges;
	image-rendering: pixelated;
}

.window {
	background: var(--window-background);
	color: var(--window-text);
	display: grid;
	grid-template: "title" "menu" "content" 1fr "footer";
	height: calc(100vh - 20px);
	width: 60%;
	border: calc(1px * var(--scale)) solid var(--window-border);
	
	user-select: none;
	-webkit-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
	
	break-after: always;
}

.window > div, .window > div > div,
.windowControls > div,
.mainContent > div,
.monitorContent > div,
.secondaryDetails {
	display: grid;
	grid-auto-flow: column;
}
.window .monitorContent, 
.window .tabContainer, 
.window .sideTabContainer,
.window .primaryDetails > .li {
	grid-auto-flow: row;
}

.titleBar {
	grid-area: title;
	grid-template-columns: 1fr auto;
	background: var(--window-accent);
	height: calc(34px * var(--scale));
	color: #fff;
}
.inactive .titleBar {
	background: none;
	color: var(--window-text);
}
.titleContents {
	padding: calc(7px * var(--scale)) calc(9px * var(--scale));
	grid-template-columns: auto 1fr;
}
.titleContents > div {
	padding-left: calc(5px * var(--scale));
}
.windowControls {
	align-content: stretch;
	column-gap: calc(1px * var(--scale));
}
.windowControls > div {
	height: calc(33px * var(--scale));
	width: calc(50px * var(--scale));
	align-content: center;
	justify-items: center;
}
.windowControls > div > svg {
	height: calc(12px * var(--scale));
	width: calc(12px * var(--scale));
	stroke: currentColor;
	stroke-width: calc(1px * var(--scale));
	fill: transparent;
	transition: 200ms background;
}
.windowControls > div:hover {
	background: var(--window-hover);
}
.windowControls > div:last-child:hover {
	background: var(--close-hover);
}

.menuBar {
	grid-area: menu;
	justify-content: start;
	border-bottom: calc(2px * var(--scale)) solid var(--divider-light);
}
.menuBar > div {
	margin: 0 calc(-1px * var(--scale)) calc(-1px * var(--scale)) 0;
	border: calc(1px * var(--scale)) solid transparent;
	padding: 0 calc(7px * var(--scale)) calc(1px * var(--scale)) calc(6px * var(--scale));
}
.menuBar > div:hover {
	background: var(--hover);
	border-color: var(--hover-border);
}
.menuBar > div:active {
	background: var(--active);
	border-color: var(--active-border);
}

.tabContainer {
	grid-area: content;
	justify-content: stretch;
	grid-template-rows: auto 1fr;
}
.tabBar {
	border-bottom: calc(1px * var(--scale)) solid var(--divider);
	justify-content: start;
	padding: calc(2px * var(--scale)) calc(2px * var(--scale)) 0;
	margin-bottom: calc(5px * var(--scale));
}
.tabBar > div {
	padding: calc(2px * var(--scale)) calc(5px * var(--scale));
	border: calc(1px * var(--scale)) solid var(--divider);
	margin: calc(2px * var(--scale)) calc(-1px * var(--scale)) calc(-1px * var(--scale)) 0;
	background: var(--window-background-secondary);
}

.tabBar > div.active {
	margin-top: 0;
	padding: calc(2px * var(--scale)) calc(7px * var(--scale));
	background: var(--window-background);
	border-bottom-width: 0;
}
.tabBar > div:not(.active):hover {
	background: var(--tab-hover);
}

.mainContent {
	grid-template-columns: calc(var(--side-width) * var(--scale)) auto 1fr;
	margin: calc(2px * var(--scale));
	line-height: 1;
}

.mainContent > .separator {
	width: calc(1px * var(--scale));
	background: var(--divider);
	margin: calc(17px * var(--scale)) calc(3px * var(--scale)) calc(5px * var(--scale));
}

.monitorContent {
	grid-template-rows: auto auto 1fr auto;
	margin:
		calc(16px * var(--scale))
		calc(28px * var(--scale))
		calc(30px * var(--scale))
		calc(25px * var(--scale));
}

.titleArea {
	align-items: end;
}

.titleArea .title {
	font-size: calc(32px * var(--scale));
}

.titleArea .name {
	font-size: calc(18px * var(--scale));
}

.left {
	justify-self: start;
}

.right {
	justify-self: end;
}

.subtitleArea {
	margin: calc(13px * var(--scale)) calc(2px * var(--scale)) 0;
	color: var(--window-text-light);
	font-size: calc(12px * var(--scale));
}

/* Graphs */
#cores {
	--cell-size: calc(100% / var(--width));
	display: flex;
	flex: 1 0 var(--cell-size);
	flex-wrap: wrap;
	text-align: end;
	border: calc(1px * var(--scale)) solid var(--cpu-accent);
	margin: calc(5px * var(--scale)) 0 calc(38px * var(--scale));
}

#cores .cell {
	width: var(--cell-size);
	border: calc(1px * var(--scale)) solid var(--divider);
	border-left: none;
	border-top: none;
	display: flex;
	justify-content: center;
	align-items: center;
}

#cores .percent {
	/* It is necessary to have the percentages not cause a layout update,
	   which absolute positioning does fix. This also applies to `#utilization`. */
	position: absolute;
	width: calc(36px * var(--scale));
}

#cores .background {
	background: var(--cpu-accent-medium);
	width: 100%;
	height: 100%;
}

.details {
	justify-content: start;
}

.value {
	font-feature-settings: "tnum";
}

.details .title {
	color: var(--window-text-light);
}

.window .primaryDetails {
	display: flex;
	flex-direction: row;
	flex-wrap: wrap;
	width: calc(233px * var(--scale));
	gap: 0 calc(17px * var(--scale));
	align-content: start;
}

.primaryDetails > .li {
	align-content: start;
}

.primaryDetails .title {
	margin-bottom: calc(8px * var(--scale));
}

.primaryDetails .value {
	font-size: calc(22px * var(--scale));
	margin-bottom: calc(14px * var(--scale));
}

/* Fix the update killing performance */
#utilization {
	position: absolute;
}

.secondaryDetails {
	line-height: 1.57;
	column-gap: calc(15px * var(--scale));
	margin-left: calc(5px * var(--scale));
}

/* Keep the ::after acting like text */
.secondaryDetails > .title {
	display: block;
	grid-column: 1;
}
.secondaryDetails > .title::after {
	content: ":";
}
.secondaryDetails > .value {
	grid-column: 2;
}

.footerBar {
	grid-area: footer;
	justify-content: start;
	align-items: center;
	gap: calc(8px * var(--scale));
	margin: calc(15px * var(--scale)) calc(8px * var(--scale));
}
.window .footerBar > div {
	display: block;
}
.footerBar .separator {
	width: calc(1px * var(--scale));
	height: 70%;
	background: var(--divider);
}

.icon {
	height: calc(18px * var(--scale));
	width: calc(18px * var(--scale));
}

.keybind {
	text-decoration: underline;
}
